<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @tour.name %>
</p>

<p>
  <strong>Description:</strong>
  <%= @tour.description %>
</p>

<p>
  <strong>Price:</strong>
  <%= @tour.price %>
</p>

<p>
  <strong>Image:</strong>
  <%= image_tag @tour.image.url(:large) %>
</p>

<p>
  <strong>Deadline:</strong>
  <%= @tour.deadline %>
</p>

<p>
  <strong>Start date:</strong>
  <%= @tour.start_date %>
</p>

<p>
  <strong>End date:</strong>
  <%= @tour.end_date %>
</p>

<p>
  <strong>Start location:</strong>
  <%= @tour.start_location %>
</p>

<p>
  <strong>Countries itinerary:</strong>
  <%= @tour.country %>
</p>

<p>
  <strong>States itinerary:</strong>
  <%= @tour.state %>
</p>

<p>
  <strong>Available seats:</strong>
  <%= @tour.available_seats %>
</p>

<p>
  <strong>Wait list:</strong>
  <%= @tour.get_waitlist %>
</p>

<p>
  <strong>Total seats:</strong>
  <%= @tour.total_seats %>
</p>

<p>
  <strong>Status:</strong>
  <%= @tour.show_status %>
</p>

<p>
  <strong>Contact information:</strong>
  <%= @tour.show_agent_info %>
</p>
<% if (current_user.admin? || current_user.agent?) && !@tour.is_completed? && !@tour.canceled %>
  <%= button_to "Cancel", cancel_tour_tour_path(@tour), method: :put, data: { confirm: 'Are you sure Cancelling Tour?' } %>
  <br> <br>
<% end %>
<% if (current_user.admin? || current_user.customer?) && !@tour.is_completed? && !@tour.canceled && !@tour.is_booked?(current_user.id) %>
  <%= button_to "Book", new_booking_url, method: :get, params: {tour_id: @tour.id}%>
  <br> <br>
<% end %>


<% if @reviews.blank? %>
  <% if current_user.customer? %>
    <h3>No reviews just yet, would you like to add the first!</h3>
    <%= link_to"Write Review", new_tour_review_path(@tour), class: "btn btn-danger"%>
  <% else %>
    <h3>No reviews just yet</h3>
  <% end %>
<% else %>
  <% @reviews.each do |review| %>
    <div class="reviews">
      <p><%= review.rating %></p>
      <p><%= review.subject %></p>
      <p><%= review.content %></p>
    </div>
  <% end %>
<% end %>

<% if (current_user.customer?) %>
  <%= link_to "Write a Review", new_tour_review_path(@tour) %>
<% end %>



<%= link_to 'Home', home_index_url %> |
<% if (current_user.admin? || current_user.customer?) && !@tour.is_completed? && !@tour.canceled && !@tour.is_booked?(current_user.id) %>
  <%= link_to 'Book Tour', new_booking_path(tour_id: @tour.id) %> |
<% end %>
<% if current_user.admin? || current_user.agent? %>
  <td><%= link_to 'Back to My Customers', bookings_url(id: current_user.id) %></td> |
  <%= link_to 'Edit', edit_tour_path(@tour) %> |
  <% if !@tour.is_completed? && !@tour.canceled %>
    <%= link_to 'Cancel', cancel_tour_tour_path(@tour), method: :put, data: { confirm: 'Are you sure Cancelling Tour?' }   %> |
  <% end %>
<% end %>

<%= link_to 'Back to Tours', tours_path %>
